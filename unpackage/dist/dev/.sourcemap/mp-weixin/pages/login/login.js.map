{"version":3,"sources":["uni-app:///main.js","webpack:///E:/code/work/wxapp/pages/login/login.vue?012b","webpack:///E:/code/work/wxapp/pages/login/login.vue?c4e3","webpack:///E:/code/work/wxapp/pages/login/login.vue?da41","webpack:///E:/code/work/wxapp/pages/login/login.vue?b74a","uni-app:///pages/login/login.vue","webpack:///E:/code/work/wxapp/pages/login/login.vue?9290"],"names":["createPage","Page","renderjs","component","options","__file","components","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"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","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=template&id=b237504c&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"content\">\r\n    <!-- #ifdef MP-WEIXIN -->\r\n    <view class='topBg'>\r\n      <image src='//aictb.oss-cn-shanghai.aliyuncs.com/wx_xcx/bg/loginBg.png'></image>\r\n    </view>\r\n    <image src=\"https://aictb.oss-cn-shanghai.aliyuncs.com/wx_xcx/bg/aiFalse.png\" mode=\"\" class='aiFalse'>\r\n      <!-- #endif -->\r\n      <!-- #ifdef APP-PLUS -->\r\n      <image style=\"width: 100%;margin-bottom: 48rpx;\" src=\"https://aictb.oss-cn-shanghai.aliyuncs.com/App/login_bg.png\"\r\n        mode=\"widthFix\"></image>\r\n      <!-- #endif -->\r\n      <view class=\"login\">\r\n        <!-- #ifdef APP-PLUS -->\r\n        <view class=\"btn_plus\">\r\n          <view :class=\"loginmode==4 ? 'itembtn b-b' :'itembtn'\" @click=\"setlogin(4)\">我是学生(家长)</view>\r\n          <view :class=\"loginmode==3 ? 'itembtn b-b' :'itembtn'\" @click=\"setlogin(3)\">我是老师</view>\r\n        </view>\r\n        <view class=\"zhanhao\" style=\"margin-top: 0;\">\r\n          <!-- <image src=\"../../static/img/wode.png\" mode=\"\"></image> -->\r\n          <input type=\"text\" v-model=\"account\" placeholder=\"请输入手机号\" placeholder-style=\"color:#dedede\" />\r\n          <image @click=\"account = ''\" src=\"https://aictb.oss-cn-shanghai.aliyuncs.com/App/input_del.png\" v-show=\"account.length>0\"\r\n            mode=\"widthFix\"></image>\r\n        </view>\r\n        <view class=\"zhanhao\">\r\n          <!-- <image src=\"../../static/img/password.png\" mode=\"\"></image> -->\r\n          <input :password=\"!pass_show\" v-model=\"password\" placeholder=\"请输入密码\" placeholder-style=\"color:#dedede\" />\r\n          <image @click=\"passChange(true)\" src=\"https://aictb.oss-cn-shanghai.aliyuncs.com/App/pass_false.png\" v-if=\"!pass_show\"\r\n            mode=\"widthFix\"></image>\r\n          <image @click=\"passChange(false)\" src=\"https://aictb.oss-cn-shanghai.aliyuncs.com/App/pass_true.png\" v-else\r\n            mode=\"widthFix\"></image>\r\n          <!-- <image @click=\"del(2)\" src=\"../../static/img/del.png\" v-show=\"password.length>0\" mode=\"\"></image> -->\r\n        </view>\r\n        <view class=\"login-btn\" @click=\"login2\">登 录</view>\r\n        <view class=\"text\">\r\n          <text @click=\"toReg()\">立即注册</text>\r\n          <text @click=\"topassword()\">忘记密码?</text>\r\n        </view>\r\n        <view class=\"wx_box\">\r\n          <view class=\"text_bg\">\r\n            <image src=\"https://aictb.oss-cn-shanghai.aliyuncs.com/App/login_wx_icon.png\" mode=\"widthFix\"></image>\r\n            <text class=\"span\">其他登录方式</text>\r\n            <image src=\"https://aictb.oss-cn-shanghai.aliyuncs.com/App/login_wx_icon.png\" mode=\"widthFix\"></image>\r\n          </view>\r\n          <image class=\"img_wx\" src=\"https://aictb.oss-cn-shanghai.aliyuncs.com/App/wechat_icon.png\" mode=\"widthFix\"\r\n            @click=\"wx_login\"></image>\r\n        </view>\r\n        <!-- #endif -->\r\n\r\n        <!-- #ifdef MP-WEIXIN -->\r\n        <view class=\"sf\">\r\n          请选择您的身份\r\n        </view>\r\n        <view class=\"weixin\">\r\n          <button open-type=\"getUserInfo\" @getuserinfo=\"bindgetuserinfo($event,4)\">我是学生(家长)</button>\r\n          <button open-type=\"getUserInfo\" @getuserinfo=\"bindgetuserinfo($event,3)\">我是老师</button>\r\n        </view>\r\n        <!-- #endif -->\r\n      </view>\r\n\r\n      <uni-popup ref=\"popup\" type=\"center\">\r\n        <view class=\"bindphone\">\r\n          <view>\r\n            需要授权获取手机号\r\n          </view>\r\n          <button open-type=\"getPhoneNumber\" @getphonenumber=\"getphone\">授权</button>\r\n        </view>\r\n      </uni-popup>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import uniPopup from \"@/components/uni-popup/uni-popup.vue\"\r\n  import {\r\n    mapState,\r\n    mapMutations\r\n  } from 'vuex';\r\n\r\n  export default {\r\n    components: {\r\n      uniPopup\r\n    },\r\n    data() {\r\n      return {\r\n        account: '',\r\n        password: '',\r\n        loginmode: 4,\r\n        type: 4,\r\n        user_id: '',\r\n        userInfo: {},\r\n        sessionkey: '',\r\n        openid: '',\r\n        code: '',\r\n        pass_show: false\r\n      };\r\n    },\r\n    onLoad() {\r\n      this.loginmode = 4\r\n      this.type = 4\r\n    },\r\n    onShow() {\r\n      // #ifdef MP-WEIXIN\r\n      this.get_wechat_login_tip()\r\n      // #endif\r\n    },\r\n    methods: {\r\n      ...mapMutations(['login', 'set_type']),\r\n      get_wechat_login_tip() {\r\n        uni.login({\r\n          success: (res) => {\r\n            this.code = res.code\r\n            this.$api.get_wechat_login({\r\n              code: res.code,\r\n            }).then(res => {\r\n              this.openid = res.data.openid\r\n              uni.setStorage({\r\n                key: \"openid\",\r\n                data: this.openid\r\n              })\r\n            })\r\n          }\r\n        })\r\n      },\r\n      passChange(bool) {\r\n        this.pass_show = bool\r\n      },\r\n      setlogin(i) {\r\n        this.type = i\r\n        this.loginmode = i\r\n        this.set_type(i);\r\n        uni.setStorage({\r\n          key: 'type',\r\n          data: i\r\n        })\r\n      },\r\n      bindgetuserinfo(e, i) {\r\n        uni.setStorage({\r\n          key: 'type',\r\n          data: i,\r\n        })\r\n        this.type = i\r\n        console.log('bindgetuserinfo', e)\r\n        this.userInfo = e.detail\r\n        this.userInfo['openid'] = this.openid\r\n        uni.setStorageSync('info', e.detail.userInfo) //头像  姓名\r\n        console.log(this.userInfo)\r\n        if (i == 4) {\r\n          this.$api.student_login(this.userInfo)\r\n            .then(res => {\r\n              if (res.code == 200) {\r\n                this.login(res.data)\r\n                if (res.data.is_bind == 0) {\r\n                  uni.navigateTo({\r\n                    url: '/pages/login/bindinfo'\r\n                  })\r\n                } else {\r\n                  if (res.data.mobile == '') {\r\n                    this.$refs.popup.open()\r\n                  } else {\r\n                    uni.reLaunch({\r\n                      url: '/pages/index/index'\r\n                    })\r\n                  }\r\n                }\r\n              } else if (res.code == 500) {\r\n                this.$refs.popup.open()\r\n              }\r\n            })\r\n        } else {\r\n          this.$api.teacher_logins(this.userInfo).then(res => {\r\n            if (res.code == 200) {\r\n              this.login(res.data)\r\n              uni.setStorage({ //缓存用户登陆状态\r\n                key: 'userInfo',\r\n                data: res.data\r\n              })\r\n              uni.setStorage({\r\n                key: \"type\",\r\n                data: 3\r\n              })\r\n              if (res.data.is_bind == 0) {\r\n                uni.navigateTo({\r\n                  url: '/pages/login/bindinfo'\r\n                })\r\n              } else {\r\n                uni.reLaunch({\r\n                  url: '/pages/index/index'\r\n                })\r\n              }\r\n            } else {\r\n              uni.setStorage({\r\n                key: 'openid',\r\n                data: res.data.openid\r\n              })\r\n              this.$refs.popup.open()\r\n            }\r\n          })\r\n        }\r\n      },\r\n      getphone(e) {\r\n        if (this.type == 3) {\r\n          let data = {\r\n            iv: e.detail.iv,\r\n            encryptedData: e.detail.encryptedData,\r\n            openid: this.openid,\r\n          }\r\n          this.$api.teacher_mobile_login(data)\r\n            .then(res => {\r\n              if (res.code == 200) {\r\n                this.login(res.data)\r\n                if (res.data.is_bind == 0) {\r\n                  uni.navigateTo({\r\n                    url: '/pages/login/bindinfo'\r\n                  })\r\n                } else {\r\n                  uni.reLaunch({\r\n                    url: '/pages/index/index'\r\n                  })\r\n                }\r\n              } else {\r\n                uni.showToast({\r\n                  title: res.msg,\r\n                  icon: 'none'\r\n                })\r\n              }\r\n            })\r\n        } else {\r\n          let data = {\r\n            iv: e.detail.iv,\r\n            encryptedData: e.detail.encryptedData,\r\n            openid: this.openid\r\n          }\r\n          this.$api.mobile_login(data)\r\n            .then(res => {\r\n              if (res.code == 200) {\r\n                this.login(res.data)\r\n                if (res.data.is_bind == 0) {\r\n                  uni.navigateTo({\r\n                    url: '/pages/login/bindinfo'\r\n                  })\r\n                } else {\r\n                  uni.reLaunch({\r\n                    url: '/pages/index/index'\r\n                  })\r\n                }\r\n              } else {\r\n                uni.showToast({\r\n                  title: res.msg,\r\n                  icon: 'none'\r\n                })\r\n              }\r\n            })\r\n        }\r\n\r\n      },\r\n      login2() {\r\n        var user_type = this.loginmode\r\n        uni.setStorage({\r\n          key: 'type',\r\n          data: user_type\r\n        })\r\n        var data = {\r\n          mobile: this.account,\r\n          password: this.password\r\n        }\r\n        var req\r\n        if (user_type == 3) {\r\n          req = this.$api.teacher_app_login(data);\r\n        } else {\r\n          req = this.$api.app_login(data);\r\n        }\r\n        req.then(res => {\r\n          console.log(res)\r\n          if (res.code == 200) {\r\n            this.login(res.data)\r\n            if (res.data.is_bind == 0) {\r\n              console.log('bind_info执行跳转')\r\n              uni.navigateTo({\r\n                url: '/pages/login/bind_info'\r\n              })\r\n            } else {\r\n              uni.showToast({\r\n                title: '登录成功'\r\n              })\r\n              setTimeout(() => {\r\n                uni.switchTab({\r\n                  url: '/pages/index/index'\r\n                })\r\n              }, 500)\r\n            }\r\n          } else {\r\n            uni.showToast({\r\n              title: res.msg,\r\n              icon: 'none'\r\n            })\r\n          }\r\n        })\r\n\r\n      },\r\n      toReg() {\r\n        uni.navigateTo({\r\n          url: '/pages/login/register?type=' + this.type\r\n        })\r\n      },\r\n      showpriTip(){\r\n        uni.showToast({\r\n          title:'请阅读协议,并同意!',\r\n          icon:'none'\r\n        })\r\n      },\r\n      topassword() {\r\n        uni.navigateTo({\r\n          url: '/pages/login/changePassword?type=' + this.type\r\n        })\r\n      },\r\n      del(i) {\r\n        if (i == 1) {\r\n          this.account = ''\r\n        } else {\r\n          this.password = ''\r\n        }\r\n      },\r\n      wx_login() {\r\n        uni.setStorage({\r\n          key: 'type',\r\n          data: this.loginmode\r\n        })\r\n        console.log(\"App微信拉起授权\")\r\n        let _this = this;\r\n        var weixinService = null;\r\n        plus.oauth.getServices(function(services) {\r\n          console.log(services)\r\n          if (services && services.length) {\r\n            for (var i = 0, len = services.length; i < len; i++) {\r\n              if (services[i].id === 'weixin') {\r\n                weixinService = services[i];\r\n                console.log('授权对象')\r\n                console.log(weixinService)\r\n                break;\r\n              }\r\n            }\r\n            if (!weixinService) {\r\n              console.log('没有微信登录授权服务');\r\n              return;\r\n            }\r\n            weixinService.authorize(function(event) { //此处获取code的关键\r\n              console.log(event)\r\n              let data = {\r\n                code: event.code\r\n              };\r\n              if (_this.loginmode == 3) {\r\n                var req = _this.$api.teacher_app_wx_login(data);\r\n              } else {\r\n                var req = _this.$api.app_wx_login(data);\r\n              }\r\n              req.then(res => {\r\n                console.log(res)\r\n                if (res.code == 200) {\r\n                  _this.login(res.data)\r\n                  uni.showToast({\r\n                    title: '登录成功'\r\n                  })\r\n                  if (!res.data.is_bind) {\r\n                    setTimeout(() => {\r\n                      uni.navigateTo({\r\n                        url: '/pages/login/bind_info'\r\n                      })\r\n                    }, 500)\r\n                  } else if (res.data.mobile == '') {\r\n                    setTimeout(() => {\r\n                      uni.navigateTo({\r\n                        url: '/pages/setting/setphone?type=index'\r\n                      })\r\n                    }, 500)\r\n                  } else {\r\n                    setTimeout(() => {\r\n                      uni.switchTab({\r\n                        url: '/pages/index/index'\r\n                      })\r\n                    }, 500)\r\n                  }\r\n                } else if (res.code == 300) {\r\n                  setTimeout(() => {\r\n                    uni.navigateTo({\r\n                      url: '/pages/login/bind_phone?openid=' + res.data.openid\r\n                    })\r\n                  }, 500)\r\n                } else {\r\n                  uni.showToast({\r\n                    title: res.msg,\r\n                    icon: 'none'\r\n                  })\r\n                }\r\n              })\r\n            }, function(error) {\r\n              console.error('authorize fail:' + JSON.stringify(error));\r\n            }, {\r\n\r\n            });\r\n          } else {\r\n            console.log('无可用的登录授权服务');\r\n          }\r\n        }, function(error) {\r\n          console.error('getServices fail:' + JSON.stringify(error));\r\n        });\r\n\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  page {\r\n    font-family: PingFang SC;\r\n  }\r\n\r\n  .content {\r\n    position: relative;\r\n    width: 100vw;\r\n    height: 100vh;\r\n  }\r\n\r\n  .topBg {\r\n    width: 100%;\r\n    height: 518rpx;\r\n\r\n    image {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n\r\n  .aiFalse {\r\n    width: 367rpx;\r\n    height: 80rpx;\r\n    margin: 72rpx auto 39rpx;\r\n    display: block;\r\n  }\r\n\r\n  .btn {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    //margin-top: 387rpx;\r\n    padding: 0 30rpx 0;\r\n\r\n    view {\r\n      text-align: center;\r\n      width: 256rpx;\r\n      height: 20rpx;\r\n      background: #fff;\r\n      border: 1rpx solid #fff;\r\n      border-radius: 10rpx;\r\n      height: 80rpx;\r\n      line-height: 80rpx;\r\n      color: rgb(236, 119, 39);\r\n      font-size: 35rpx;\r\n    }\r\n  }\r\n\r\n  .login {\r\n    width: 590rpx;\r\n    background: #fff;\r\n    margin: 0 auto;\r\n    border-radius: 10rpx;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    .sf {\r\n      height: 40rpx;\r\n      line-height: 40rpx;\r\n      font-size: 28rpx;\r\n      color: #cccccc;\r\n      text-align: left;\r\n    }\r\n\r\n    .weixin {\r\n      button {\r\n        // border: 1rpx solid #fff;\r\n        width: 100%;\r\n        height: 112rpx;\r\n        margin: 26rpx auto 0;\r\n        line-height: 112rpx;\r\n        color: #fff;\r\n        font-size: 42rpx;\r\n        background: #ff2121;\r\n      }\r\n\r\n      button:nth-of-type(2) {\r\n        margin-top: 34rpx;\r\n      }\r\n    }\r\n\r\n    .zhanhao {\r\n      width: 100%;\r\n      height: 80rpx;\r\n      margin-top: 35rpx;\r\n      background: #F4F4F4;\r\n      border-radius: 38rpx;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding-left: 30rpx;\r\n      box-sizing: border-box;\r\n\r\n      image {\r\n        width: 40rpx;\r\n        height: 40rpx;\r\n        margin-right: 30rpx;\r\n      }\r\n\r\n      input {\r\n        width: 80%;\r\n        height: 80rpx;\r\n      }\r\n    }\r\n\r\n    .wx_box {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      align-items: center;\r\n\r\n      .text_bg {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        margin-bottom: 40rpx;\r\n\r\n        .span {\r\n          font-size: 24rpx;\r\n          font-family: Source Han Sans CN;\r\n          font-weight: 400;\r\n          color: #999999;\r\n          margin: 0 26rpx;\r\n        }\r\n\r\n        image {\r\n          width: 54rpx;\r\n          height: 2rpx;\r\n        }\r\n      }\r\n\r\n      .img_wx {\r\n        width: 66rpx;\r\n        height: 66rpx;\r\n      }\r\n    }\r\n  }\r\n\r\n  .text {\r\n    padding: 0 50rpx;\r\n    height: 100rpx;\r\n    line-height: 100rpx;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    color: #E50304;\r\n  }\r\n\r\n  .login-btn {\r\n    width: 100%;\r\n    height: 80rpx;\r\n    color: #fff;\r\n    background: linear-gradient(86deg, #E50304, #F74300);\r\n    line-height: 80rpx;\r\n    text-align: center;\r\n    font-size: 30rpx;\r\n    margin-top: 50rpx;\r\n    border-radius: 40rpx;\r\n  }\r\n\r\n  .wx-btn {\r\n    width: 580rpx;\r\n    height: 80rpx;\r\n    border-radius: 50rpx;\r\n    border: 1rpx solid rgb(222, 81, 28);\r\n    background: #fff;\r\n    color: rgb(222, 81, 28);\r\n    margin-top: 50rpx;\r\n    line-height: 80rpx\r\n  }\r\n\r\n  .banquan {\r\n    font-size: 20rpx;\r\n    color: #dedede;\r\n    text-align: center;\r\n    margin-top: 50rpx;\r\n  }\r\n\r\n  .bindphone {\r\n    background: #fff;\r\n    width: 550rpx;\r\n    height: 600rpx;\r\n    border-radius: 20rpx;\r\n\r\n    view {\r\n      font-size: 35rpx;\r\n      color: #888;\r\n      text-align: center;\r\n      height: 300rpx;\r\n      line-height: 300rpx;\r\n    }\r\n\r\n    button {\r\n      width: 60%;\r\n      height: 100rpx;\r\n      margin: 0rpx auto;\r\n      line-height: 100rpx;\r\n      color: #fff;\r\n      font-size: 32rpx;\r\n      border-radius: 20rpx;\r\n      background-image: linear-gradient(left, #e50304 0%, #f74300 80%);\r\n    }\r\n  }\r\n  .privacyPolicytip{\r\n    background: #fff;\r\n    border-radius: 20rpx;\r\n    margin: 0 20rpx;\r\n    padding-top: 20rpx;\r\n    overflow: hidden;\r\n    .privacyTitle{\r\n      text-align: center;\r\n      font-size: 36rpx;\r\n      font-family: 'PingFang SC';\r\n      font-weight: 500;\r\n      color: #333333;\r\n    }\r\n    .privacyText{\r\n      margin-top: 15rpx;\r\n      font-size: 30rpx;\r\n      padding: 30rpx;\r\n      font-family: 'PingFang SC';\r\n      font-weight: 500;\r\n      color: #333333;\r\n    }\r\n    .btns{\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      margin-top: 15rpx;\r\n      .btn{\r\n        flex: 1;\r\n        height: 80rpx;\r\n        border-radius: 0;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n      }\r\n      .agreebtn{\r\n        background: linear-gradient(86deg, #E50304, #F74300);\r\n        color: #fff;\r\n      }\r\n      .noagreebtn{\r\n        background-color: #e0e0e0;\r\n      }\r\n    }\r\n  }\r\n\r\n  .btn_plus {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin-bottom: 64rpx;\r\n\r\n    .itembtn {\r\n      flex: 1;\r\n      font-size: 30rpx;\r\n      font-family: PingFang SC;\r\n      font-weight: bold;\r\n      color: #999999;\r\n      padding: 20rpx 40rpx;\r\n      border-bottom: 4rpx solid #fff;\r\n      text-align: center;\r\n    }\r\n\r\n    .b-b {\r\n      border-bottom: 4rpx solid #E50304;\r\n      color: #333333 !important;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.9.3.20201014\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}