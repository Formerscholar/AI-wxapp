(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{27:
/*!*******************************************************************!*\
  !*** E:/code/work/wxapp/main.js?{"page":"pages%2Flogin%2Flogin"} ***!
  \*******************************************************************/
/*! no static exports found */function(e,n,o){"use strict";(function(e){o(/*! uni-pages */4),o(/*! @dcloudio/uni-stat */5);t(o(/*! vue */2));var n=t(o(/*! ./pages/login/login.vue */28));function t(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},28:
/*!************************************************!*\
  !*** E:/code/work/wxapp/pages/login/login.vue ***!
  \************************************************/
/*! no static exports found */function(e,n,o){"use strict";o.r(n);var t=o(/*! ./login.vue?vue&type=template&id=b237504c& */29),i=o(/*! ./login.vue?vue&type=script&lang=js& */31);for(var a in i)"default"!==a&&function(e){o.d(n,e,(function(){return i[e]}))}(a);o(/*! ./login.vue?vue&type=style&index=0&lang=scss& */33);var s,r=o(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */16),c=Object(r["default"])(i["default"],t["render"],t["staticRenderFns"],!1,null,null,null,!1,t["components"],s);c.options.__file="pages/login/login.vue",n["default"]=c.exports},29:
/*!*******************************************************************************!*\
  !*** E:/code/work/wxapp/pages/login/login.vue?vue&type=template&id=b237504c& ***!
  \*******************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,o){"use strict";o.r(n);var t=o(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c& */30);o.d(n,"render",(function(){return t["render"]})),o.d(n,"staticRenderFns",(function(){return t["staticRenderFns"]})),o.d(n,"recyclableRender",(function(){return t["recyclableRender"]})),o.d(n,"components",(function(){return t["components"]}))},30:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/code/work/wxapp/pages/login/login.vue?vue&type=template&id=b237504c& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,o){"use strict";o.r(n),o.d(n,"render",(function(){return i})),o.d(n,"staticRenderFns",(function(){return s})),o.d(n,"recyclableRender",(function(){return a})),o.d(n,"components",(function(){return t}));var t={uniPopup:function(){return o.e(/*! import() | components/uni-popup/uni-popup */"components/uni-popup/uni-popup").then(o.bind(null,/*! @/components/uni-popup/uni-popup.vue */391))}},i=function(){var e=this,n=e.$createElement;e._self._c},a=!1,s=[];i._withStripped=!0},31:
/*!*************************************************************************!*\
  !*** E:/code/work/wxapp/pages/login/login.vue?vue&type=script&lang=js& ***!
  \*************************************************************************/
/*! no static exports found */function(e,n,o){"use strict";o.r(n);var t=o(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js& */32),i=o.n(t);for(var a in t)"default"!==a&&function(e){o.d(n,e,(function(){return t[e]}))}(a);n["default"]=i.a},32:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/code/work/wxapp/pages/login/login.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o(/*! vuex */10);function i(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?i(Object(o),!0).forEach((function(n){s(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function s(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}var r=function(){o.e(/*! require.ensure | components/uni-popup/uni-popup */"components/uni-popup/uni-popup").then(function(){return resolve(o(/*! @/components/uni-popup/uni-popup.vue */391))}.bind(null,o)).catch(o.oe)},c={components:{uniPopup:r},data:function(){return{account:"",password:"",loginmode:4,type:4,user_id:"",userInfo:{},sessionkey:"",openid:"",code:"",pass_show:!1}},onLoad:function(){this.loginmode=4,this.type=4},methods:a(a({},(0,t.mapMutations)(["login","set_type"])),{},{passChange:function(e){this.pass_show=e},setlogin:function(n){this.type=n,this.loginmode=n,this.set_type(n),e.setStorage({key:"type",data:n})},bindgetuserinfo:function(n,o){var t=this;e.login({success:function(i){t.code=i.code,console.log(t.code),e.setStorage({key:"type",data:o}),console.log("bindgetuserinfo",n),t.userInfo=n.detail.userInfo,e.setStorageSync("info",n.detail.userInfo),3==o?(console.log(t.userInfo),t.$api.teacher_login({code:t.code}).then((function(n){var o;t.sessionkey=null===(o=n.data)||void 0===o?void 0:o.session_key,t.openid=n.data.openid,e.setStorage({key:"unionid",data:n.data.unionid}),e.setStorage({key:"openid",data:t.openid}),console.log("res.data.data ",n.data),200==n.code?(t.login(n.data),e.setStorage({key:"userInfo",data:n.data}),e.setStorage({key:"type",data:3}),e.reLaunch({url:"/pages/index/index"})):(e.setStorage({key:"openid",data:n.data.openid}),t.$refs.popup.open())}))):(console.log("学生登录",t.userInfo,t.code),t.$api.student_login({code:t.code}).then((function(n){var o;t.sessionkey=null===(o=n.data)||void 0===o?void 0:o.session_key,t.openid=n.data.openid,e.setStorage({key:"unionid",data:n.data.unionid}),e.setStorage({key:"openid",data:t.openid}),console.log("res",n),200==n.code?(t.login(n.data),e.setStorage({key:"is_vip",data:n.data.is_vip}),e.setStorage({key:"userInfo",data:n.data}),e.setStorage({key:"type",data:4}),e.reLaunch({url:"/pages/index/index"})):300==n.code?e.showToast({title:n.msg,icon:"none"}):e.navigateTo({url:"/pages/login/bindinfo"})})))}})},getphone:function(n){var o=this;console.log(n);var t={code:this.code,iv:n.detail.iv,encryptedData:n.detail.encryptedData,sessionkey:this.sessionkey,openid:this.openid,user_name:this.userInfo.nickName,avatar:this.userInfo.avatarUrl,gender:this.userInfo.gender};this.$api.get_mobile(t).then((function(n){200==n.code?(o.login(n.data),e.reLaunch({url:"/pages/index/index"})):300==n.code?(e.setStorageSync("mobile",n.data.mobile),e.reLaunch({url:"/pages/login/bindinfo"})):e.showToast({title:n.msg,icon:"none"}),console.log(n)}))},login2:function(){var n=this,o=this.loginmode;e.setStorage({key:"type",data:o});var t,i={mobile:this.account,password:this.password};t=3==o?this.$api.teacher_app_login(i):this.$api.app_login(i),t.then((function(o){console.log(o),200==o.code?(n.login(o.data),0==o.data.is_bind?(console.log("bind_info执行跳转"),e.navigateTo({url:"/pages/login/bind_info"})):(e.showToast({title:"登录成功"}),setTimeout((function(){e.switchTab({url:"/pages/index/index"})}),500))):e.showToast({title:o.msg,icon:"none"})}))},toReg:function(){e.navigateTo({url:"/pages/login/register?type="+this.type})},topassword:function(){e.navigateTo({url:"/pages/login/changePassword?type="+this.type})},del:function(e){1==e?this.account="":this.password=""},wx_login:function(){console.log("App微信拉起授权");var n=this,o=null;plus.oauth.getServices((function(t){if(console.log(t),t&&t.length){for(var i=0,a=t.length;i<a;i++)if("weixin"===t[i].id){o=t[i],console.log("授权对象"),console.log(o);break}if(!o)return void console.log("没有微信登录授权服务");o.authorize((function(o){console.log(o);var t={code:o.code};if(3==n.loginmode)var i=n.$api.teacher_app_wx_login(t);else i=n.$api.app_wx_login(t);i.then((function(o){console.log(o),200==o.code?(n.login(o.data),e.showToast({title:"登录成功"}),o.data.is_bind?setTimeout((function(){e.switchTab({url:"/pages/index/index"})}),500):setTimeout((function(){e.switchTab({url:"/pages/login/bindinfo"})}),500)):e.showToast({title:o.msg,icon:"none"})}))}),(function(e){console.error("authorize fail:"+JSON.stringify(e))}),{})}else console.log("无可用的登录授权服务")}),(function(e){console.error("getServices fail:"+JSON.stringify(e))}))}})};n.default=c}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},33:
/*!**********************************************************************************!*\
  !*** E:/code/work/wxapp/pages/login/login.vue?vue&type=style&index=0&lang=scss& ***!
  \**********************************************************************************/
/*! no static exports found */function(e,n,o){"use strict";o.r(n);var t=o(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss& */34),i=o.n(t);for(var a in t)"default"!==a&&function(e){o.d(n,e,(function(){return t[e]}))}(a);n["default"]=i.a},34:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/code/work/wxapp/pages/login/login.vue?vue&type=style&index=0&lang=scss& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,o){}},[[27,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/login.js.map