(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myPaper/seePapers"],{"2eb4":function(t,e,i){"use strict";(function(t){function s(t){return a(t)||r(t)||n(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if(t){if("string"===typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function a(t){if(Array.isArray(t))return c(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(){Promise.all([i.e("common/vendor"),i.e("components/uni-popup/uni-popup")]).then(function(){return resolve(i("f02b"))}.bind(null,i)).catch(i.oe)},h={components:{uniPopup:u},data:function(){return{token:"",based_id:"",list:[],is_more:1,page:1,update:!0,same_type:[],type:4,subject:"",title:"",subject_name:"",status:"",page_change:1,size_change:5,know_point:"",subject_id:"",exercises_id:"",is:"",is_vip:"",source:""}},onReachBottom:function(){this.is_more&&1==this.st?(this.page++,this.get_errorbook_exercises()):this.is_more&&1!=this.st&&"photo"!=this.status&&(this.page++,this.get_list())},onshow:function(){this.page_change=1},onLoad:function(e){this.is_vip=t.getStorageSync("is_vip"),console.log("options",e),this.type=t.getStorageSync("type"),this.st=e.st,this.subject=e.subject,this.source=e.source,this.title=e.title,this.subject_name=e.subject_name,this.status=e.status,this.is=e.is,e.based_id&&(this.based_id=e.based_id),t.getStorageSync("token")&&(this.token=t.getStorageSync("token")),1==e.st?(this.get_errorbook_exercises(),"is_student"==this.is&&this.changeTitle("错题本内容")):"photo"==this.status?(this.changeTitle("教辅内容"),this.list=JSON.parse(decodeURIComponent(e.listData)),Array.isArray(this.list)?this.list=this.list:this.list=[],console.log("this.list",this.list)):this.get_list()},methods:{changeStyle:function(t){return t=t.replace(new RegExp("<p","gi"),'<p style="color: #000;position:relative"'),t=t.replace(new RegExp("<img","gi"),'<img style="max-width:95%;vertical-align: middle;width:auto;"'),t},changeTitle:function(e){t.setNavigationBarTitle({title:e})},changeData:function(){this.page_change++,this.open()},jiexi:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.source;t.navigateTo({url:"/pages/knowledgeBase/watchExplane?id="+e+"&source="+i})},get_errorbook_exercises:function(){var e=this;if(3==t.getStorageSync("type"))var i=this.$api.get_teacher_errorbook_exercises({token:this.token,page:this.page,errorbook_id:this.based_id});else i=this.$api.get_errorbook_exercises({token:this.token,page:this.page,errorbook_id:this.based_id});i.then((function(t){e.is_more=t.is_more,console.log(t),1==e.page?e.list=t.data.exercises_list:e.list=[].concat(s(e.list),s(t.data.exercises_list))}))},get_list:function(){var e=this,i="";i=3==t.getStorageSync("type")?this.$api.school_test_paper_detail({token:this.token,based_id:this.based_id,page:this.page}):this.$api.user_test_paper_detail({token:this.token,based_id:this.based_id,page:this.page}),i.then((function(t){console.log(t),e.is_more=t.is_more,t.code,1==e.page?e.list=t.data.exercises_list:e.list=[].concat(s(e.list),s(t.data.exercises_list))}))},open:function(e,i){var s=this;e&&(this.know_point=e.know_point,this.subject_id=e.subject_id,this.exercises_id=e.exercises_id),void 0!=i&&(this.know_point=this.list[i].know_point,this.subject_id=this.list[i].subject_id,this.exercises_id=this.list[i].exercises_id);var o={token:this.token,know_point:this.know_point,type:this.type,subject_id:this.subject_id,exercises_id:this.exercises_id,page:this.page_change,size:this.size_change};if(4==t.getStorageSync("type"))var n=this.$api.same_type(o);else n=this.$api.teacher_same_type(o);n.then((function(e){console.log(e),200==e.code?(s.same_type=e.data.exercises_list,s.$refs.popup.open()):t.showToast({title:e.msg,icon:"none"})}))},join_error:function(e,i){var s=this;if(console.log("join_error_new",e,i,t.getStorageSync("type")),this.list[e].status?this.list[e].status=!1:this.list[e].status=!0,this.update=!1,this.update=!0,4==t.getStorageSync("type"))var o=this.$api.join_error({token:this.token,exercises_id:i,source:this.source});else o=this.$api.teacher_join_error({token:this.token,exercises_id:i});o.then((function(o){console.log(o),200==o.code&&(s.list[e].is_error?s.list[e].is_error=0:s.list[e].is_error=1,4==t.getStorageSync("type")&&"加入成功"==o.msg&&s.open(i,e))}))},join_error2:function(e,i){var s=this;if(this.same_type[e].status?this.same_type[e].status=!1:this.same_type[e].status=!0,this.update=!1,this.update=!0,4==t.getStorageSync("type"))var o=this.$api.join_error({token:this.token,exercises_id:i,is_type:1,source:5});else o=this.$api.teacher_join_error({token:this.token,exercises_id:i,is_type:1});o.then((function(i){console.log(i),200==i.code?s.same_type[e].is_error?s.same_type[e].is_error=0:s.same_type[e].is_error=1:t.showToast({title:i.msg,icon:"none"})}))},hiddenmodal:function(){this.$refs.popup.close()}}};e.default=h}).call(this,i("543d")["default"])},"396d":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s}));var s={uniPopup:function(){return Promise.all([i.e("common/vendor"),i.e("components/uni-popup/uni-popup")]).then(i.bind(null,"f02b"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.list,(function(e,i){var s=t.__get_orig(e),o=0!=t.list.length?t.changeStyle(e.content):null;return{$orig:s,m0:o}}))),s=t.__map(t.same_type,(function(e,i){var s=t.__get_orig(e),o=0!=t.same_type.length?t.changeStyle(e.content):null;return{$orig:s,m1:o}}));t.$mp.data=Object.assign({},{$root:{l0:i,l1:s}})},n=[]},"4cc1":function(t,e,i){},5732:function(t,e,i){"use strict";(function(t){i("f6c3"),i("921b");s(i("66fd"));var e=s(i("987b"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"987b":function(t,e,i){"use strict";i.r(e);var s=i("396d"),o=i("f0eb");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("dd23");var r,a=i("f0c5"),c=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],r);e["default"]=c.exports},dd23:function(t,e,i){"use strict";var s=i("4cc1"),o=i.n(s);o.a},f0eb:function(t,e,i){"use strict";i.r(e);var s=i("2eb4"),o=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=o.a}},[["5732","common/runtime","common/vendor"]]]);