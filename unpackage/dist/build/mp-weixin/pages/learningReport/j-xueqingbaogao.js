(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/learningReport/j-xueqingbaogao"],{3784:function(t,e,i){"use strict";var a=i("a130"),n=i.n(a);n.a},"57e1":function(t,e,i){"use strict";(function(t){i("022d"),i("921b");a(i("66fd"));var e=a(i("8721"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"6e27":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("0fd2"));function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return u(t)||c(t)||r(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"===typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function c(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var h,_=function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("4b8f"))}.bind(null,i)).catch(i.oe)},p=null,d={components:{uniPopup:_},data:function(){return{pieData:[],colorList:["#EC6941","#F19EC2","#00A0E9","#7E6B5A","#80C269","#0068B7","#f1c40f","#c0392b","#8e44ad","#EA2027"],cWidth:t.upx2px(750),cHeight:t.upx2px(500),pixelRatio:1,serverData:"",token:"",class_list:[],error_count:0,count_list:[],team_id:"",time:"2020-06-04",time2:"2020-06-04",dateList:[{time:"近一周",dateStaus:!0},{time:"近一个月",dateStaus:!1},{time:"近一年",dateStaus:!1}],it:"day",msg:"暂无错题知识点",Pie:{series:[]},exercises_id:"",exercises_list:[],page_change:1,size_change:2,update:!0,page:1,is_more:1,type:3,same_type:[],analysisList:[]}},onReachBottom:function(){this.is_more&&(this.page++,this.get_hot_title())},onLoad:function(){h=this,t.getStorageSync("token")&&(this.token=t.getStorageSync("token")),this.selectDate(0),this.get_class(),this.get_hot_title()},methods:{changeStyle:function(t){return t=t.replace(new RegExp("<p","gi"),'<p style="color: #000;position:relative"'),t=t.replace(new RegExp("<img","gi"),'<img style="max-width:95%;vertical-align: middle;width:auto;"'),t},getDateRange:function(t,e,i){var a,n=864e5,s=[];return 1==i?(a=new Date(t.getTime()-e*n),s.push(this.formateDate(a)),s.push(this.formateDate(t))):(a=new Date(t.getTime()+e*n),s.push(this.formateDate(t)),s.push(this.formateDate(a))),s},formateDate:function(t){var e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate();return i<10&&(i="0"+i),a<10&&(a="0"+a),e+"-"+i+"-"+a},selectDate:function(t){var e=this,i=new Date;this.dateList.forEach((function(a,n,s){if(t==n)if(a.dateStaus=!0,0==t){e.it="day";var o=e.getDateRange(i,6,!0);e.time=o[0],e.time2=o[1]}else if(1==t){e.it="day";var r=e.getDateRange(i,30,!0);e.time=r[0],e.time2=r[1]}else{e.it="day";var c=e.getDateRange(i,365,!0);e.time=c[0],e.time2=c[1]}else a.dateStaus=!1})),this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},select_class:function(t){var e=this;this.class_list.forEach((function(i,a,n){e.class_list[t].status=t==a})),this.team_id=this.class_list[t].team_id,this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},get_class:function(){var t=this;this.$api.my_team_ids({token:this.token}).then((function(e){console.log(e),e.code,t.class_list=e.data,t.team_id=t.class_list[0].team_id,t.get_baogao(),t.page=1,t.exercises_list=[],t.get_hot_title()}))},get_baogao:function(){var t=this;this.$api.teacher_study_analysis({token:this.token,team_id:this.team_id,start_time:this.time,end_time:this.time2}).then((function(e){t.pieData=e.data.count_list,void 0!==e.data.length?(t.analysisList=e.data,t.Pie.series=e.data,t.pieData=e.data.count_list):(t.Pie.series=[],t.pieData=[],t.analysisList=[]),t.showPie("canvasPie",t.Pie)}))},showPie:function(e,i){p=new a.default({$this:h,canvasId:e,type:"pie",fontSize:11,legend:{show:!0},background:"#FFFFFF",pixelRatio:h.pixelRatio,series:i.series,animation:!0,width:h.cWidth*h.pixelRatio-t.upx2px(200)*h.pixelRatio,height:h.cHeight*h.pixelRatio,dataLabel:!0,extra:{pie:{lableWidth:15}}})},touchPie:function(t){p.showToolTip(t,{format:function(t){return t.name+":"+t.data}})},bindMultiPickerChange:function(t){console.log(t),this.time=t.detail.value,this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},bindMultiPickerChange2:function(t){console.log(t),this.time2=t.detail.value,this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},changeData:function(){var e=this,i={token:this.token,exercises_id:this.exercises_id,page:this.page_change++,size:this.size_change},a=this.$api.teacher_same_type(i);a.then((function(i){200==i.code?e.same_type=i.data.exercises_list:t.showToast({title:"没有更多同类型题目",icon:"none"})}))},jiexi:function(e){t.navigateTo({url:"/pages/knowledgeBase/watchExplane?id="+e})},get_hot_title:function(){var t=this;t.$api.hot_error_exercises({token:t.token,team_id:t.team_id,start_time:t.time,end_time:t.time2,page:t.page,page_size:5}).then((function(e){200==e.code&&(console.log("res",e),t.is_more=e.is_more,1==t.page?t.exercises_list=e.data:t.exercises_list=[].concat(s(t.exercises_list),s(e.data)))}))},open:function(e){var i=this;this.exercises_id=e;var a={token:this.token,exercises_id:e,page:this.page_change,size:this.size_change},n=this.$api.teacher_same_type(a);n.then((function(e){console.log(e),200==e.code?(i.same_type=e.data.exercises_list,i.$refs.popup.open()):t.showToast({title:e.msg,icon:"none"})}))},hiddenmodal:function(){this.$refs.popup.close()},join_error:function(t,e){var i=this,a=this.$api.teacher_join_error({token:this.token,exercises_id:e,is_vip:1});a.then((function(e){200==e.code&&(i.exercises_list[t].is_error?i.exercises_list[t].is_error=0:i.exercises_list[t].is_error=1),i.update=!1,i.update=!0}))},join_error2:function(t,e){var i=this,a=this.$api.teacher_join_error({token:this.token,exercises_id:e});a.then((function(e){200==e.code&&(i.same_type[t].is_error?i.same_type[t].is_error=0:i.same_type[t].is_error=1),i.update=!1,i.update=!0}))}}};e.default=d}).call(this,i("543d")["default"])},8721:function(t,e,i){"use strict";i.r(e);var a=i("b0d1"),n=i("9260");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("3784");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=c.exports},9260:function(t,e,i){"use strict";i.r(e);var a=i("6e27"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},a130:function(t,e,i){},b0d1:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"4b8f"))}},n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.analysisList.length&&0!=t.analysisList.length?t.__map(t.analysisList,(function(e,i){var a=t.__get_orig(e),n=i.toString(),s=i.toString();return{$orig:a,g0:n,g1:s}})):null),a=t.__map(t.exercises_list,(function(e,i){var a=t.__get_orig(e),n=t.changeStyle(e.content);return{$orig:a,m0:n}})),n=t.__map(t.same_type,(function(e,i){var a=t.__get_orig(e),n=t.changeStyle(e.content);return{$orig:a,m1:n}}));t.$mp.data=Object.assign({},{$root:{l0:i,l1:a,l2:n}})},s=[]}},[["57e1","common/runtime","common/vendor"]]]);