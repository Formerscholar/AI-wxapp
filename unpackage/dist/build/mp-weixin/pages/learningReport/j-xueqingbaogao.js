(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/learningReport/j-xueqingbaogao"],{"0e5a":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("7c51"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t){return u(t)||r(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h,_=function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("106f"))}.bind(null,i)).catch(i.oe)},d=null,p={components:{uniPopup:_},data:function(){return{pieData:[],cWidth:t.upx2px(750),cHeight:t.upx2px(500),pixelRatio:1,serverData:"",token:"",class_list:[],error_count:0,count_list:[],team_id:"",time:"2020-06-04",time2:"2020-06-04",dateList:[{time:"近一周",dateStaus:!0},{time:"近一个月",dateStaus:!1},{time:"近一年",dateStaus:!1}],it:"day",msg:"该班级暂无错题!",Pie:{series:[]},exercises_id:"",exercises_list:[],page_change:1,size_change:5,update:!0,page:1,is_more:1,type:3,same_type:[]}},onReachBottom:function(){this.is_more&&(this.page++,this.get_hot_title())},onLoad:function(){h=this,t.getStorageSync("token")&&(this.token=t.getStorageSync("token")),this.selectDate(0),this.get_class(),this.get_hot_title()},methods:{changeStyle:function(t){return t=t.replace(new RegExp("<p","gi"),'<p style="color: #000;position:relative"'),t=t.replace(new RegExp("<img","gi"),'<img style="max-width:95%;vertical-align: middle;width:auto;"'),t},selectDate:function(t){var e=this,i=this,n=new Date,a=n.getFullYear(),o=n.getMonth(),s=n.getMonth()+1,c=n.getDate();o<10&&(o="0"+o),s<10&&(s="0"+s),c<10&&(c="0"+c),this.dateList.forEach((function(n,o,r){t==o?(n.dateStaus=!0,0==t?(i.it="day",e.time="".concat(a,"-").concat(s,"-").concat(c-7),e.time2="".concat(a,"-").concat(s,"-").concat(c)):1==t?(i.it="day",e.time="".concat(a,"-").concat(s-1,"-").concat(c),e.time2="".concat(a,"-").concat(s,"-").concat(c)):(i.it="day",e.time="".concat(a-1,"-").concat(s,"-").concat(c),e.time2="".concat(a,"-").concat(s,"-").concat(c))):n.dateStaus=!1})),this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},select_class:function(t){var e=this;this.class_list.forEach((function(i,n,a){e.class_list[t].status=t==n})),this.team_id=this.class_list[t].team_id,this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},get_class:function(){var t=this;this.$api.my_team_ids({token:this.token}).then((function(e){console.log(e),e.code,t.class_list=e.data,t.team_id=t.class_list[0].team_id,t.get_baogao(),t.page=1,t.exercises_list=[],t.get_hot_title()}))},get_baogao:function(){var t=this;t.$api.teacher_study_analysis({token:t.token,team_id:t.team_id,start_time:t.time,end_time:t.time2}).then((function(e){console.log(e),t.pieData=e.data.count_list,200==e.code?(null!=e.data?t.Pie.series=e.data:t.Pie.series=[],h.showPie("canvasPie",t.Pie)):(t.pieData=[],t.Pie.series=[],h.showPie("canvasPie",t.Pie))}))},showPie:function(e,i){d=new n.default({$this:h,canvasId:e,type:"pie",fontSize:11,legend:{show:!0},background:"#FFFFFF",pixelRatio:h.pixelRatio,series:i.series,animation:!0,width:h.cWidth*h.pixelRatio-t.upx2px(200)*h.pixelRatio,height:h.cHeight*h.pixelRatio,dataLabel:!0,extra:{pie:{lableWidth:15}}})},touchPie:function(t){d.showToolTip(t,{format:function(t){return t.name+":"+t.data}})},bindMultiPickerChange:function(t){console.log(t),this.time=t.detail.value,this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},bindMultiPickerChange2:function(t){console.log(t),this.time2=t.detail.value,this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},changeData:function(){this.page_change++,this.open()},jiexi:function(e){t.navigateTo({url:"/pages/knowledgeBase/watchExplane?id="+e})},get_hot_title:function(){var t=this;t.$api.hot_error_exercises({token:t.token,team_id:t.team_id,start_time:t.time,end_time:t.time2,page:t.page,page_size:5}).then((function(e){200==e.code&&(console.log("res",e),t.is_more=e.is_more,1==t.page?t.exercises_list=e.data:t.exercises_list=[].concat(o(t.exercises_list),o(e.data)))}))},open:function(e){var i=this;this.exercises_id=e;var n={token:this.token,exercises_id:e,page:this.page_change,size:this.size_change},a=this.$api.teacher_same_type(n);a.then((function(e){console.log(e),200==e.code?(i.same_type=e.data.exercises_list,i.$refs.popup.open()):t.showToast({title:e.msg,icon:"none"})}))},hiddenmodal:function(){this.$refs.popup.close()},join_error:function(t,e){var i=this,n=this.$api.teacher_join_error({token:this.token,exercises_id:e,is_vip:1});n.then((function(e){200==e.code&&(i.exercises_list[t].is_error?i.exercises_list[t].is_error=0:i.exercises_list[t].is_error=1),i.update=!1,i.update=!0}))},join_error2:function(t,e){var i=this,n=this.$api.teacher_join_error({token:this.token,exercises_id:e});n.then((function(e){200==e.code&&(i.same_type[t].is_error?i.same_type[t].is_error=0:i.same_type[t].is_error=1),i.update=!1,i.update=!0}))}}};e.default=p}).call(this,i("543d")["default"])},"52fd":function(t,e,i){"use strict";(function(t){i("a371");n(i("66fd"));var e=n(i("c644"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"7c44":function(t,e,i){"use strict";var n=i("e31e"),a=i.n(n);a.a},"8a89":function(t,e,i){"use strict";i.r(e);var n=i("0e5a"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},b4d7:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"106f"))}},a=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.exercises_list,(function(e,i){var n=t.__get_orig(e),a=t.changeStyle(e.content);return{$orig:n,m0:a}}))),n=t.__map(t.same_type,(function(e,i){var n=t.__get_orig(e),a=t.changeStyle(e.content);return{$orig:n,m1:a}}));t.$mp.data=Object.assign({},{$root:{l0:i,l1:n}})},o=[]},c644:function(t,e,i){"use strict";i.r(e);var n=i("b4d7"),a=i("8a89");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("7c44");var s,c=i("f0c5"),r=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=r.exports},e31e:function(t,e,i){}},[["52fd","common/runtime","common/vendor"]]]);