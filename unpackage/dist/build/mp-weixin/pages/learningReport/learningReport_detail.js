(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/learningReport/learningReport_detail"],{"400b":function(e,t,i){"use strict";var n=i("6499"),a=i.n(n);a.a},"415d":function(e,t,i){"use strict";(function(e){i("022d"),i("921b");n(i("66fd"));var t=n(i("f1a9"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},"420e":function(e,t,i){"use strict";i.r(t);var n=i("cfcb"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},6499:function(e,t,i){},cfcb:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("0fd2"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return u(e)||c(e)||r(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"===typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}function c(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var h,p=function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("4b8f"))}.bind(null,i)).catch(i.oe)},d=null,_={components:{uniPopup:p},data:function(){return{type:"",pieData:[],colorList:["#EC6941","#F19EC2","#00A0E9","#7E6B5A","#80C269","#0068B7","#f1c40f","#c0392b","#8e44ad","#EA2027"],cWidth:e.upx2px(750),cHeight:e.upx2px(500),pixelRatio:1,serverData:"",token:"",error_count:0,count_list:[],team_id:"",time:"2020-06-04",time2:"2020-06-04",dateList:[{time:"近一周",dateStaus:!0},{time:"近一个月",dateStaus:!1},{time:"近一年",dateStaus:!1}],it:"day",msg:"该学生暂无错题!",Pie:{series:[]},student_name:"",team_name:"",user_id:"",exercises_id:"",exercises_list:[],exercises_count:0,page_change:1,size_change:5,update:!0,page:1,is_more:1,same_type:[],analysisList:[]}},onReachBottom:function(){this.is_more&&(this.page++,this.get_hot_title())},onLoad:function(t){h=this,console.log(t),this.student_name=t.student_name,e.setNavigationBarTitle({title:this.student_name+"的学情报告"}),this.team_name=t.team_name,this.user_id=t.user_id,e.getStorageSync("token")&&(this.token=e.getStorageSync("token")),this.type=e.getStorageSync("type"),this.selectDate(0),this.get_baogao(),this.get_hot_title()},methods:{changeStyle:function(e){return e=e.replace(new RegExp("<p","gi"),'<p style="color: #000;position:relative"'),e=e.replace(new RegExp("<img","gi"),'<img style="max-width:95%;vertical-align: middle;width:auto;"'),e},getDateRange:function(e,t,i){var n,a=864e5,o=[];return 1==i?(n=new Date(e.getTime()-t*a),o.push(this.formateDate(n)),o.push(this.formateDate(e))):(n=new Date(e.getTime()+t*a),o.push(this.formateDate(e)),o.push(this.formateDate(n))),o},formateDate:function(e){var t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return i<10&&(i="0"+i),n<10&&(n="0"+n),t+"-"+i+"-"+n},selectDate:function(e){var t=this,i=new Date;this.dateList.forEach((function(n,a,o){if(e==a)if(n.dateStaus=!0,0==e){t.it="day";var s=t.getDateRange(i,6,!0);t.time=s[0],t.time2=s[1]}else if(1==e){t.it="day";var r=t.getDateRange(i,30,!0);t.time=r[0],t.time2=r[1]}else{t.it="day";var c=t.getDateRange(i,365,!0);t.time=c[0],t.time2=c[1]}else n.dateStaus=!1})),this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},get_baogao:function(){var e=this,t=this;t.$api.analysis_detail({token:t.token,user_id:t.user_id,start_time:t.time,end_time:t.time2}).then((function(t){e.pieData=t.data.count_list,void 0!==t.data.length?(e.analysisList=t.data,e.Pie.series=t.data):(e.Pie.series=[],e.pieData=[],e.analysisList=[]),e.showPie("canvasPie",e.Pie)}))},showPie:function(t,i){d=new n.default({$this:h,canvasId:t,type:"pie",fontSize:11,legend:{show:!0},background:"#FFFFFF",pixelRatio:h.pixelRatio,series:i.series,animation:!0,width:h.cWidth*h.pixelRatio-e.upx2px(200)*h.pixelRatio,height:h.cHeight*h.pixelRatio,dataLabel:!0,extra:{pie:{lableWidth:15}}})},touchPie:function(e){d.showToolTip(e,{format:function(e){return e.name+":"+e.data}})},bindMultiPickerChange:function(e){console.log(e),this.time=e.detail.value,this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},bindMultiPickerChange2:function(e){console.log(e),this.time2=e.detail.value,this.get_baogao(),this.page=1,this.exercises_list=[],this.get_hot_title()},changeData:function(){this.page_change++,this.open()},jiexi:function(t){e.navigateTo({url:"/pages/knowledgeBase/watchExplane?id="+t})},get_hot_title:function(){var e=this;e.$api.hot_error_exercises({token:e.token,user_id:e.user_id,start_time:e.time,end_time:e.time2,page:e.page,page_size:5}).then((function(t){200==t.code&&(console.log("res",t),e.is_more=t.is_more,1==e.page?e.exercises_list=t.data:e.exercises_list=[].concat(o(e.exercises_list),o(t.data)))}))},open:function(t){var i=this;this.exercises_id=t;var n={token:this.token,exercises_id:t,page:this.page_change,size:this.size_change},a=this.$api.teacher_same_type(n);a.then((function(t){console.log(t),200==t.code?(i.same_type=t.data.exercises_list,i.$refs.popup.open()):e.showToast({title:t.msg,icon:"none"})}))},hiddenmodal:function(){this.$refs.popup.close()},join_error:function(e,t){var i=this,n=this.$api.teacher_join_error({token:this.token,exercises_id:t,is_vip:1});n.then((function(t){200==t.code&&(i.exercises_list[e].is_error?i.exercises_list[e].is_error=0:i.exercises_list[e].is_error=1),i.update=!1,i.update=!0}))},join_error2:function(e,t){var i=this,n=this.$api.teacher_join_error({token:this.token,exercises_id:t});n.then((function(t){200==t.code&&(i.same_type[e].is_error?i.same_type[e].is_error=0:i.same_type[e].is_error=1),i.update=!1,i.update=!0}))}}};t.default=_}).call(this,i("543d")["default"])},f1a9:function(e,t,i){"use strict";i.r(t);var n=i("f249"),a=i("420e");for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("400b");var s,r=i("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=c.exports},f249:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"4b8f"))}},a=function(){var e=this,t=e.$createElement,i=(e._self._c,e.analysisList.length&&0!=e.analysisList.length?e.__map(e.analysisList,(function(t,i){var n=e.__get_orig(t),a=i.toString(),o=i.toString();return{$orig:n,g0:a,g1:o}})):null),n=e.__map(e.exercises_list,(function(t,i){var n=e.__get_orig(t),a=e.changeStyle(t.content);return{$orig:n,m0:a}})),a=e.__map(e.same_type,(function(t,i){var n=e.__get_orig(t),a=e.changeStyle(t.content);return{$orig:n,m1:a}}));e.$mp.data=Object.assign({},{$root:{l0:i,l1:n,l2:a}})},o=[]}},[["415d","common/runtime","common/vendor"]]]);