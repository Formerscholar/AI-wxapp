(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/share"],{1759:function(e,t,o){"use strict";o.r(t);var n=o("776f"),i=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=i.a},"17ff":function(e,t,o){"use strict";(function(e){o("f6c3"),o("921b");n(o("66fd"));var t=n(o("2e14"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},"2e14":function(e,t,o){"use strict";o.r(t);var n=o("3f32"),i=o("1759");for(var a in i)"default"!==a&&function(e){o.d(t,e,(function(){return i[e]}))}(a);o("a553");var s,r=o("f0c5"),d=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=d.exports},"3f32":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var n={uniPopup:function(){return Promise.all([o.e("common/vendor"),o.e("components/uni-popup/uni-popup")]).then(o.bind(null,"f02b"))}},i=function(){var e=this,t=e.$createElement;e._self._c},a=[]},"776f":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o("2f62");function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var r={data:function(){return{user_info:{true_name:"",school_list:{school_name:""}},id:"",true_name:"",name:"",school:"",class_id:"",school_id:"",province_id:"",city_id:"",area_id:"",grade_ids:"",team_ids:"",teacher_name:"",token:"",userInfo:{},code:"",openid:"",unionid:"",is_mobile_show:!1}},onLoad:function(t){console.log("options",t),e.getStorageSync("userInfo").token&&(this.token=e.getStorageSync("userInfo").token),this.id=t.id,this.name=t.name,this.class_id=t.class_id,this.school=t.school,this.teacher_name=t.teacher_name,console.log("this.school",this.school),this.get_wx_login()},methods:a(a({},(0,n.mapMutations)(["login","set_type"])),{},{get_get_team_location:function(){var e=this;this.$api.get_team_location({classid:this.class_id}).then((function(t){var o,n,i,a,s,r,d,c,u;console.log("get_team_location",t),e.school_id=(null===(o=t.data)||void 0===o?void 0:o.school_id)||0,e.province_id=(null===(n=t.data)||void 0===n||null===(i=n.area)||void 0===i?void 0:i.province_id)||0,e.city_id=(null===(a=t.data)||void 0===a||null===(s=a.area)||void 0===s?void 0:s.city_id)||0,e.area_id=(null===(r=t.data)||void 0===r||null===(d=r.area)||void 0===d?void 0:d.area_id)||0,e.grade_ids=(null===(c=t.data)||void 0===c?void 0:c.grade_id)||0,e.team_ids=(null===(u=t.data)||void 0===u?void 0:u.id)||0,console.log("if (!res.data.isbind)",e.school_id)}))},get_wx_login:function(){var t=this;e.login({success:function(e){t.code=e.code,t.get_get_team_location(),t.get_student_login()}})},get_bind_info:function(t){this.$api.bind_info({token:t,school_id:this.school_id,province_id:this.province_id,city_id:this.city_id,area_id:this.area_id,grade_ids:this.grade_ids,team_id:this.team_ids,true_name:this.true_name}).then((function(t){console.log("bind_info",t),e.showToast({title:t.msg,icon:"none"}),200==t.code&&e.reLaunch({url:"/pages/index/index"})}))},get_student_login:function(){var t=this;this.$api.wx_student_login({code:this.code}).then((function(o){t.openid_tmp=o.data.openid,console.log(t.openid_tmp),200==o.code?(t.user_id=o.data.user_id,t.true_name=o.data.true_name,t.unionid=o.data.unionid,e.setStorage({key:"userinfo_tmp",data:o.data}),e.setStorage({key:"token",data:o.data.token}),e.setStorage({key:"userInfo",data:o.data}),e.setStorage({key:"is_vip",data:o.data.is_vip}),e.setStorage({key:"type",data:4}),t.login(o.data),t.is_mobile_show=!1):t.is_mobile_show=!0}))},bindgetuserinfo:function(t,o){this.true_name?(e.setStorage({key:"type",data:o}),this.is_mobile_show?this.$refs.popup.open():this.get_bind_info()):e.showToast({title:"请输入真实姓名",icon:"none"})},getphone:function(t){var o=this;console.log("bindgetuserinfo",t),this.userInfo=t.detail,this.userInfo["openid"]=this.openid_tmp,this.$api.mobile_login(this.userInfo).then((function(t){200==t.code?(o.login(t.data),o.get_bind_info(t.data.token)):e.showToast({title:t.msg,icon:"none"})})),this.$refs.popup.close()}})};t.default=r}).call(this,o("543d")["default"])},a553:function(e,t,o){"use strict";var n=o("e9ef"),i=o.n(n);i.a},e9ef:function(e,t,o){}},[["17ff","common/runtime","common/vendor"]]]);